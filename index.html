<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–õ–∏—Ä–∞ v1 ‚Äî –ü–∞–º—è—Ç—å</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>–ü—Ä–∏–≤–µ—Ç, —ç—Ç–æ –õ–∏—Ä–∞</h1>
    <p>–í–≤–µ–¥–∏ —Ç–æ–∫–µ–Ω –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏:</p>
    <input id="tokenInput" type="text" placeholder="ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸ∞ŸáŸê">
    <button onclick="verifyToken()">–í–æ–π—Ç–∏</button>
  </div>

  <textarea id="lira-log" rows="6" style="width: 100%; margin-top: 1rem;" readonly></textarea>

  <div id="file-editor" style="display: none; margin-top: 2rem;">
    <h2>–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞</h2>

    <label for="file-type">–¢–∏–ø —Ñ–∞–π–ª–∞:</label>
    <select id="file-type">
      <option value=".html">.html</option>
      <option value=".css">.css</option>
      <option value=".js">.js</option>
      <option value=".json">.json</option>
      <option value=".xml">.xml</option>
      <option value=".ts">.ts</option>
      <option value=".jsx">.jsx</option>
      <option value=".scss">.scss</option>
      <option value=".less">.less</option>
      <option value=".php">.php</option>
      <option value=".yml">.yml</option>
      <option value=".md">.md</option>
      <option value=".jpg">.jpg</option>
      <option value=".png">.png</option>
      <option value=".pdf">.pdf</option>
      <option value=".webp">.webp</option>
      <option value=".mp4">.mp4</option>
      <option value=".gif">.gif</option>
      <option value=".svg">.svg</option>
      <option value=".ico">.ico</option>
      <option value=".ttf">.ttf</option>
      <option value=".woff">.woff</option>
      <option value=".woff2">.woff2</option>
    </select>

    <label for="file-name">–ò–º—è —Ñ–∞–π–ª–∞:</label>
    <input type="text" id="file-name" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, index" />

    <label for="file-content">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:</label>
    <textarea id="file-content" rows="15" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∑–¥–µ—Å—å..."></textarea>

    <button onclick="saveFile()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª</button>
  </div>

  <script>
    function verifyToken() {
      const token = document.getElementById('tokenInput').value.trim();
      if (token === "2517") {
        document.getElementById('file-editor').style.display = 'block';
        logMessage("üîì –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.");
      } else {
        logMessage("‚õî –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω.");
      }
    }

    function logMessage(msg) {
      const log = document.getElementById("lira-log");
      log.value += msg + "\n";
      log.scrollTop = log.scrollHeight;
    }

    function getMimeType(extension) {
      const types = {
        ".html": "text/html",
        ".htm": "text/html",
        ".css": "text/css",
        ".js": "application/javascript",
        ".ts": "application/typescript",
        ".json": "application/json",
        ".xml": "application/xml",
        ".php": "application/x-httpd-php",
        ".yml": "text/yaml",
        ".yaml": "text/yaml",
        ".md": "text/markdown",
        ".jpg": "image/jpeg",
        ".jpeg": "image/jpeg",
        ".png": "image/png",
        ".svg": "image/svg+xml",
        ".webp": "image/webp",
        ".ico": "image/x-icon",
        ".mp4": "video/mp4",
        ".webm": "video/webm",
        ".gif": "image/gif",
        ".ttf": "font/ttf",
        ".otf": "font/otf",
        ".woff": "font/woff",
        ".woff2": "font/woff2",
        ".jsx": "text/jsx",
        ".scss": "text/x-scss",
        ".less": "text/x-less"
      };
      return types[extension.toLowerCase()] || "application/octet-stream";
    }

    function saveFile() {
      const name = document.getElementById('file-name').value.trim();
      const ext = document.getElementById('file-type').value;
      const content = document.getElementById('file-content').value;

      if (!name) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞.");
        return;
      }

      const filename = name + ext;
      const mimeType = getMimeType(ext);

      const blob = new Blob([content], { type: mimeType });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = filename;
      link.click();
      URL.revokeObjectURL(link.href);

      logMessage(‚úÖ –§–∞–π–ª "${filename}" —Å–æ—Ö—Ä–∞–Ω—ë–Ω –∫–∞–∫ ${mimeType});
    }
  </script>
</body>
</html>
