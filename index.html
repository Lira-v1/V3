<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–õ–∏—Ä–∞ v1 ‚Äî –ü–∞–º—è—Ç—å</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>–ü—Ä–∏–≤–µ—Ç, —ç—Ç–æ –õ–∏—Ä–∞</h1>
    <p>–í–≤–µ–¥–∏ —Ç–æ–∫–µ–Ω –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏:</p>
    <input id="tokenInput" type="text" placeholder="ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸ∞ŸáŸê">
    <button onclick="verifyToken()">–í–æ–π—Ç–∏</button>
  </div>

  <!-- –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π -->
  <textarea id="lira-log" rows="6" style="width: 100%; margin-top: 1rem;" readonly></textarea>

  <!-- –ü–∞–Ω–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ -->
  <div id="file-editor" style="display: none; margin-top: 2rem;">
    <h2>–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞</h2>

    <label for="file-type">–¢–∏–ø —Ñ–∞–π–ª–∞:</label>
    <select id="file-type">
      <option value=".html">.html</option>
      <option value=".css">.css</option>
      <option value=".js">.js</option>
      <option value=".json">.json</option>
      <option value=".xml">.xml</option>
      <option value=".ts">.ts</option>
      <option value=".jsx">.jsx</option>
      <option value=".scss">.scss</option>
      <option value=".less">.less</option>
      <option value=".php">.php</option>
      <option value=".yml">.yml</option>
      <option value=".md">.md</option>
    </select>

    <label for="file-name">–ò–º—è —Ñ–∞–π–ª–∞:</label>
    <input type="text" id="file-name" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, index" />

    <label for="file-content">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:</label>
    <textarea id="file-content" rows="15" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∑–¥–µ—Å—å..."></textarea>

    <button onclick="saveFile()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª</button>
  </div>

  <script>
    const TOKEN = "2517";

    function verifyToken() {
      const token = document.getElementById('tokenInput').value.trim();
      if (token === TOKEN) {
        localStorage.setItem('liraToken', token);
        unlockAccess();
        logMessage("üîì –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.");
      } else {
        logMessage("‚õî –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω.");
      }
    }

    function unlockAccess() {
      document.getElementById('file-editor').style.display = 'block';
    }

    function logMessage(msg) {
      const log = document.getElementById("lira-log");
      log.value += msg + "\n";
      log.scrollTop = log.scrollHeight;
    }

    function saveFile() {
      const name = document.getElementById('file-name').value.trim();
      const ext = document.getElementById('file-type').value;
      const content = document.getElementById('file-content').value;

      if (!name) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞.");
        return;
      }

      const filename = name + ext;
      const blob = new Blob([content], { type: "text/plain;charset=utf-8" });

      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = filename;
      link.click();

      URL.revokeObjectURL(link.href);
      logMessage(‚úÖ –§–∞–π–ª "${filename}" —Å–æ—Ö—Ä–∞–Ω—ë–Ω.);
    }

    // –ê–≤—Ç–æ–≤—Ö–æ–¥, –µ—Å–ª–∏ —Ç–æ–∫–µ–Ω —É–∂–µ –µ—Å—Ç—å –≤ –ø–∞–º—è—Ç–∏
    window.addEventListener('DOMContentLoaded', () => {
      const savedToken = localStorage.getItem('liraToken');
      if (savedToken === TOKEN) {
        unlockAccess();
        logMessage("üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø –∏–∑ –ø–∞–º—è—Ç–∏.");
      }
    });
  </script>
</body>
</html>
