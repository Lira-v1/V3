<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–õ–∏—Ä–∞ v1 ‚Äî –ü–∞–º—è—Ç—å</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="container">
    <h1>–ü—Ä–∏–≤–µ—Ç, —ç—Ç–æ –õ–∏—Ä–∞</h1>
    <p>–í–≤–µ–¥–∏ —Ç–æ–∫–µ–Ω –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏:</p>
    <input id="tokenInput" type="text" placeholder="ÿ®Ÿêÿ≥ŸíŸÖŸê Ÿ±ŸÑŸÑŸëŸ∞ŸáŸê">
    <button onclick="verifyToken()">–í–æ–π—Ç–∏</button>
  </div>

  <!-- –õ–æ–≥ –¥–µ–π—Å—Ç–≤–∏–π -->
  <textarea id="lira-log" rows="6" style="width: 100%; margin-top: 1rem;" readonly></textarea>

  <!-- –ü–∞–Ω–µ–ª—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–æ–≤ -->
  <div id="file-editor" style="display: none; margin-top: 2rem;">
    <h2>–°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞</h2>

    <label for="file-type">–¢–∏–ø —Ñ–∞–π–ª–∞:</label>
    <select id="file-type">
      <option value=".html">.html</option>
      <option value=".css">.css</option>
      <option value=".js">.js</option>
      <option value=".json">.json</option>
      <option value=".xml">.xml</option>
      <option value=".ts">.ts</option>
      <option value=".jsx">.jsx</option>
      <option value=".scss">.scss</option>
      <option value=".less">.less</option>
      <option value=".php">.php</option>
      <option value=".yml">.yml</option>
      <option value=".md">.md</option>
    </select>

    <label for="file-name">–ò–º—è —Ñ–∞–π–ª–∞:</label>
    <input type="text" id="file-name" placeholder="–Ω–∞–ø—Ä–∏–º–µ—Ä, index" />

    <label for="file-content">–°–æ–¥–µ—Ä–∂–∏–º–æ–µ:</label>
    <textarea id="file-content" rows="15" placeholder="–í–≤–µ–¥–∏—Ç–µ –∫–æ–¥ –∑–¥–µ—Å—å..."></textarea>

    <button onclick="saveFile()">üíæ –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ñ–∞–π–ª</button>
  </div>

  <!-- –†–∞–∑–¥–µ–ª –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –ø–∞–º—è—Ç–∏ -->
  <div id="memory-files" style="display: none; margin-top: 2rem;">
    <h2>üìÅ –§–∞–π–ª—ã –ø–∞–º—è—Ç–∏</h2>
    <ul id="file-list" style="list-style-type: none; padding-left: 0;"></ul>
  </div>

  <script>
    function verifyToken() {
      const token = document.getElementById('tokenInput').value.trim();
      if (token === "2517") {
        document.getElementById('file-editor').style.display = 'block';
        document.getElementById('memory-files').style.display = 'block';
        updateFileList();
        logMessage("üîì –î–æ—Å—Ç—É–ø —Ä–∞–∑—Ä–µ—à—ë–Ω. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω.");
      } else {
        logMessage("‚õî –ù–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω.");
      }
    }

    function logMessage(msg) {
      const log = document.getElementById("lira-log");
      log.value += msg + "\n";
      log.scrollTop = log.scrollHeight;
    }

    function saveFile() {
      const name = document.getElementById('file-name').value.trim();
      const ext = document.getElementById('file-type').value;
      const content = document.getElementById('file-content').value;

      if (!name) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞.");
        return;
      }

      const filename = name + ext;
      const blob = new Blob([content], { type: "text/plain;charset=utf-8" });

      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = filename;
      link.click();

      URL.revokeObjectURL(link.href);

      // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ localStorage
      const files = JSON.parse(localStorage.getItem('liraFiles') || '[]');
      files.push({ name: filename, content });
      localStorage.setItem('liraFiles', JSON.stringify(files));
      updateFileList();

      logMessage(‚úÖ –§–∞–π–ª "${filename}" —Å–æ—Ö—Ä–∞–Ω—ë–Ω.);
    }

    function updateFileList() {
      const files = JSON.parse(localStorage.getItem('liraFiles') || '[]');
      const list = document.getElementById('file-list');
      list.innerHTML = '';

      files.forEach(file => {
        const li = document.createElement('li');
        const btn = document.createElement('button');
        btn.textContent = file.name;
        btn.style.marginBottom = '4px';
        btn.onclick = () => {
          document.getElementById('file-name').value = file.name.replace(/\.[^/.]+$/, "");
          document.getElementById('file-type').value = '.' + file.name.split('.').pop();
          document.getElementById('file-content').value = file.content;
          logMessage(üìÇ –ó–∞–≥—Ä—É–∂–µ–Ω —Ñ–∞–π–ª "${file.name}");
        };
        li.appendChild(btn);
        list.appendChild(li);
      });
    }
  </script>
</body>
</html>
